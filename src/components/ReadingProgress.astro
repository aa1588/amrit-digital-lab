---
// Reading progress bar that shows scroll position through the article
---

<div class="reading-progress-container">
  <div class="reading-progress-bar" id="reading-progress"></div>
</div>

<script>
  function updateProgress() {
    const article = document.querySelector('.blog-post');
    if (!article) return;

    const articleTop = article.offsetTop;
    const articleHeight = article.offsetHeight;
    const windowHeight = window.innerHeight;
    const scrollY = window.scrollY;

    // Calculate progress through the article
    const start = articleTop;
    const end = articleTop + articleHeight - windowHeight;
    const progress = Math.min(Math.max((scrollY - start) / (end - start), 0), 1);

    const progressBar = document.getElementById('reading-progress');
    if (progressBar) {
      progressBar.style.width = `${progress * 100}%`;
    }
  }

  // Update on scroll with throttling
  let ticking = false;
  window.addEventListener('scroll', () => {
    if (!ticking) {
      requestAnimationFrame(() => {
        updateProgress();
        ticking = false;
      });
      ticking = true;
    }
  });

  // Initial update
  updateProgress();
</script>

<style>
  .reading-progress-container {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background: transparent;
    z-index: 1000;
  }

  .reading-progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, var(--color-accent), var(--color-accent-secondary));
    transition: width 0.1s ease-out;
    border-radius: 0 2px 2px 0;
  }
</style>
